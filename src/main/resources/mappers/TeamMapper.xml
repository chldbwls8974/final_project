<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kh.final_project.dao.TeamDAO">
	<select id="selectListTeamByMtNum" resultType="kr.kh.final_project.vo.TeamVO">
		SELECT
			team.*,
		    `match`.*,
		    count(en_num) as entry_count
		FROM
			team
				join
			`match` on te_mt_num = mt_num
				left join
			entry on en_te_num = te_num
		where
			te_mt_num = #{mt_num} and
		    te_type = 0
		group by
			te_num
	</select>
	<insert id="insertListTeamByMtNum">
		insert into team(te_mt_num, te_type)
		values(#{mt_num}, 0)
	</insert>
</mapper>